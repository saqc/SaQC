
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Global Keywords &#8212; SaQC 2.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/nature.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="../_static/SaQCLogoSmall.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Customizations" href="Customizations.html" />
    <link rel="prev" title="Generic Functions" href="GenericFunctions.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Customizations.html" title="Customizations"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="GenericFunctions.html" title="Generic Functions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">SaQC 2.0.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Global Keywords</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p><a class="reference external" href="https://www.ufz.de/"><img alt="ufzLogo" src="../_images/UFZLogo.png" style="width: 40%;" /></a> <a class="reference external" href="https://www.ufz.de/index.php?de=45348"><img alt="rdmLogo" class="align-right" src="../_images/RDMLogo.png" style="width: 22%;" /></a></p>
<section id="global-keywords">
<h1>Global Keywords<a class="headerlink" href="#global-keywords" title="Permalink to this headline">¶</a></h1>
<p>Introduction to the usage of the global keywords. (Keywords that can be passed to any <a class="reference internal" href="../_api/saqc.SaQC.html#saqc.SaQC" title="saqc.SaQC"><code class="xref py py-class docutils literal notranslate"><span class="pre">saqc.SaQC</span></code></a> method.)</p>
<ol class="arabic simple" start="0">
<li><p><a class="reference internal" href="#set-up">Set Up</a></p>
<ul class="simple">
<li><p><a class="reference internal" href="#example-data">Example data</a></p></li>
<li><p><a class="reference internal" href="#flagging-scheme-constraint">Flagging Scheme Constraint</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#label-keyword">label keyword</a></p>
<ul class="simple">
<li><p><a class="reference internal" href="#label-example-usage">label Example Usage</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#dfilter-and-flag-keywords">dfilter and flag keywords</a></p>
<ul class="simple">
<li><p><a class="reference internal" href="#flags-of-different-significance">Flags of Different Significance</a></p></li>
<li><p><a class="reference internal" href="#unflagging-values">Unflagging Values</a></p></li>
</ul>
</li>
</ol>
<section id="set-up">
<h2>Set Up<a class="headerlink" href="#set-up" title="Permalink to this headline">¶</a></h2>
<section id="flagging-scheme-constraint">
<h3>Flagging Scheme Constraint<a class="headerlink" href="#flagging-scheme-constraint" title="Permalink to this headline">¶</a></h3>
<p>The Tutorial currently only works when instantiating an <a class="reference internal" href="../_api/saqc.SaQC.html#saqc.SaQC" title="saqc.SaQC"><code class="xref py py-class docutils literal notranslate"><span class="pre">SaQC</span></code></a> object with the default
<a class="reference internal" href="FlaggingTranslation.html#flagshistorytranslations"><span class="std std-ref">flagging scheme</span></a>, which is the <a class="reference internal" href="../_api/saqc.core.FloatScheme.html#saqc.core.FloatScheme" title="saqc.core.FloatScheme"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatScheme</span></code></a>.</p>
</section>
<section id="example-data">
<h3>Example Data<a class="headerlink" href="#example-data" title="Permalink to this headline">¶</a></h3>
<p>Lets generate some example data and plot it:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">noise</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span> <span class="c1"># some normally distributed noise</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">noise</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2020&#39;</span><span class="p">,</span><span class="s1">&#39;2021&#39;</span><span class="p">,</span><span class="n">periods</span><span class="o">=</span><span class="mi">200</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">)</span> <span class="c1"># index the noise with some dates</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">20</span><span class="p">]</span> <span class="o">=</span> <span class="mi">16</span> <span class="c1"># add some artificial anomalies:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">17</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">160</span><span class="p">:</span><span class="mi">180</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">saqc</span><span class="o">.</span><span class="n">SaQC</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span> 
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/GlobalKeywords-2.png" class="plot-directive" src="../_images/GlobalKeywords-2.png" />
</figure>
</section>
</section>
<section id="label-keyword">
<h2>Label Keyword<a class="headerlink" href="#label-keyword" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">label</span></code> keyword can be passed with any function call and serves as label to be plotted by a subsequent
call to <a class="reference internal" href="../_api/saqc.SaQC.html#saqc.SaQC.plot" title="saqc.SaQC.plot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">saqc.SaQC.plot()</span></code></a>.</p>
<p>It is especially useful for enriching figures with custom context information, and for making results from
different function calls distinguishable with respect to their purpose and parameterisation.
Check out the following example:</p>
<p>At first, we apply some flagging functions to mark anomalies without usage of the <code class="docutils literal notranslate"><span class="pre">label</span></code> keyword:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">flagRange</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">flagRange</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=-</span><span class="mi">16</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">flagConstants</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="s1">&#39;2D&#39;</span><span class="p">,</span> <span class="n">thresh</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">flagManual</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">mdata</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="s1">&#39;2020-05&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="s1">&#39;2020-03&#39;</span><span class="p">])))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span> 
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/GlobalKeywords-3.png" class="plot-directive" src="../_images/GlobalKeywords-3.png" />
</figure>
<p>In the above plot, one might want to discern the two results from the call to <a class="reference internal" href="../_api/saqc.SaQC.html#saqc.SaQC.flagRange" title="saqc.SaQC.flagRange"><code class="xref py py-meth docutils literal notranslate"><span class="pre">saqc.SaQC.flagRange()</span></code></a> with
respect to the parameters they where called with, also, one might want to give some hints about what is the context of
the flags “manually” determined by the call to <a class="reference internal" href="../_api/saqc.SaQC.html#saqc.SaQC.flagManual" title="saqc.SaQC.flagManual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">saqc.SaQC.flagManual()</span></code></a>. Lets repeat the procedure and
enrich the call with this information by making use of the label keyword:</p>
<section id="label-example-usage">
<h3>Label Example Usage<a class="headerlink" href="#label-example-usage" title="Permalink to this headline">¶</a></h3>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">saqc</span><span class="o">.</span><span class="n">SaQC</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">flagRange</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;values &lt; 15&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">flagRange</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=-</span><span class="mi">16</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;values &gt; -16&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">flagConstants</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="s1">&#39;2D&#39;</span><span class="p">,</span> <span class="n">thresh</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;values constant longer than 2 days&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">flagManual</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">mdata</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="s1">&#39;2020-05&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="s1">&#39;2020-03&#39;</span><span class="p">])),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;values collected while sensor maintenance&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span> 
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/GlobalKeywords-4.png" class="plot-directive" src="../_images/GlobalKeywords-4.png" />
</figure>
</section>
</section>
<section id="dfilter-and-flag-keywords">
<h2>dfilter and flag keywords<a class="headerlink" href="#dfilter-and-flag-keywords" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">flag</span></code> keyword controls a tests level of flagging <span class="math notranslate nohighlight">\(f(v)\)</span> for any value <span class="math notranslate nohighlight">\(v\)</span>. So,
in short, the keyword controls the output flag level of any flagging function.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">dfilter</span></code> keyword controls the threshold up to which a flagged value is masked, when passed
on to any flagging function. So, in short, it controls the input threshold, up to which flagged values are visible to
any function that operates on the values.</p>
<p>In more detail: Any value <span class="math notranslate nohighlight">\(v\)</span> with a flag <span class="math notranslate nohighlight">\(f(v)\)</span> will be masked, if <span class="math notranslate nohighlight">\(f(v) &gt;=\)</span> <code class="docutils literal notranslate"><span class="pre">dfilter</span></code>. A masked value
will appear as <code class="docutils literal notranslate"><span class="pre">NaN</span></code> (<cite>not a number</cite>, or <cite>missing</cite>) to the flagging function and will be numerically treated as such.
(This means, its excluded from most arithmetic calculations, but may be implicitly part of operations, such as <cite>count(NaN)</cite> or <cite>isnan</cite>).
Lets at first visualize this interplay with the <code class="xref py py-meth docutils literal notranslate"><span class="pre">saqc.SaqC.plot()</span></code> method. (We are reusing data and code
from the <a class="reference internal" href="#example-data">Example Data</a> section). First, we set some flags to the data. As pointed out in
<a class="reference internal" href="#flagging-scheme-constraint">Flagging Scheme Constraint</a> , we are referring to defaultly instantiated <a class="reference internal" href="../_api/saqc.SaQC.html#saqc.SaQC" title="saqc.SaQC"><code class="xref py py-class docutils literal notranslate"><span class="pre">saqc.SaQC</span></code></a> objects, that use the
<a class="reference internal" href="../_api/saqc.core.FloatScheme.html#saqc.core.FloatScheme" title="saqc.core.FloatScheme"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatScheme</span></code></a> , (which uses a real valued scale of flags levels,
ranging from <code class="docutils literal notranslate"><span class="pre">-inf</span></code> to <code class="docutils literal notranslate"><span class="pre">255.0</span></code>).:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">saqc</span><span class="o">.</span><span class="n">SaQC</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">flagRange</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;flaglevel=200&#39;</span><span class="p">,</span> <span class="n">flag</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">flagRange</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=-</span><span class="mi">16</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;flaglevel=100&#39;</span><span class="p">,</span> <span class="n">flag</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">flagManual</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">mdata</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="s1">&#39;2020-05&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="s1">&#39;2020-03&#39;</span><span class="p">])),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;flaglevel=0&#39;</span><span class="p">,</span> <span class="n">flag</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span> 
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/GlobalKeywords-5.png" class="plot-directive" src="../_images/GlobalKeywords-5.png" />
</figure>
<p>With the <code class="docutils literal notranslate"><span class="pre">dfilter</span></code> Keyword, we can now control, which of the flags are passed on to the plot function.
For example, if we set <code class="docutils literal notranslate"><span class="pre">dfilter=50</span></code>, the flags set by the <a class="reference internal" href="../_api/saqc.SaQC.html#saqc.SaQC.flagRange" title="saqc.SaQC.flagRange"><code class="xref py py-meth docutils literal notranslate"><span class="pre">saqc.SaQC.flagRange()</span></code></a> method wont get passed on
and thus, the resulting plot will be cleared from the flags:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">dfilter</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span> 
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/GlobalKeywords-6.png" class="plot-directive" src="../_images/GlobalKeywords-6.png" />
</figure>
<section id="flags-of-different-significance">
<h3>Flags of Different Significance<a class="headerlink" href="#flags-of-different-significance" title="Permalink to this headline">¶</a></h3>
<p>We can also use the interplay between the <code class="docutils literal notranslate"><span class="pre">dfilter</span></code> keyword and <code class="docutils literal notranslate"><span class="pre">flag</span></code> keyword, to order flags priorities.
By default, the <code class="docutils literal notranslate"><span class="pre">dfilter</span></code> keyword is set to the highest flag value of the instantiated
<a class="reference internal" href="FlaggingTranslation.html#flagshistorytranslations"><span class="std std-ref">flagging scheme</span></a>, referred to, as <code class="xref py py-attr docutils literal notranslate"><span class="pre">BAD</span></code>.
Since the flag set by a test also defaults to <code class="xref py py-attr docutils literal notranslate"><span class="pre">BAD</span></code>, the second call
to <a class="reference internal" href="../_api/saqc.SaQC.html#saqc.SaQC.flagRange" title="saqc.SaQC.flagRange"><code class="xref py py-meth docutils literal notranslate"><span class="pre">saqc.SaQC.flagRange()</span></code></a> in the example below, wont get passed the values already flagged by the first call to
<a class="reference internal" href="../_api/saqc.SaQC.html#saqc.SaQC.flagRange" title="saqc.SaQC.flagRange"><code class="xref py py-meth docutils literal notranslate"><span class="pre">saqc.SaQC.flagRange()</span></code></a> - so it cant check the value level and assign no additional flag by its self.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">saqc</span><span class="o">.</span><span class="n">SaQC</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">flagRange</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;value &gt; 15&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">flagRange</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;value &gt; 0&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span> 
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/GlobalKeywords-7.png" class="plot-directive" src="../_images/GlobalKeywords-7.png" />
</figure>
<p>We can make the value flagged by both the flagging functions by increasing the
<code class="docutils literal notranslate"><span class="pre">dfilter</span></code> threshold of the flagging function called second, above the default flag level of
<code class="xref py py-attr docutils literal notranslate"><span class="pre">BAD</span></code>. This can be achieved, by passing the flagging constant
<code class="xref py py-attr docutils literal notranslate"><span class="pre">FILTER_NONE</span></code>,</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">saqc.constants</span> <span class="kn">import</span> <span class="n">FILTER_NONE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">saqc</span><span class="o">.</span><span class="n">SaQC</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">flagRange</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;value &gt; 15&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">flagRange</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;value &gt; 0&#39;</span><span class="p">,</span> <span class="n">dfilter</span><span class="o">=</span><span class="n">FILTER_NONE</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span> 
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/GlobalKeywords-8.png" class="plot-directive" src="../_images/GlobalKeywords-8.png" />
</figure>
</section>
<section id="unflagging-values">
<h3>Unflagging Values<a class="headerlink" href="#unflagging-values" title="Permalink to this headline">¶</a></h3>
<p>With the <code class="docutils literal notranslate"><span class="pre">flag</span></code> keyword it is as also possible, to <cite>revoke</cite> or <cite>unflag</cite> a flag from a value.
This way, it is possible to associate flags with conditions determined by other functions.
For example, if we want to flag all values below a level of <cite>0.5</cite>, but not those that belong to a constant value
course, we can achieve that, by combining the <code class="docutils literal notranslate"><span class="pre">flag</span></code> and the <code class="docutils literal notranslate"><span class="pre">dfilter</span></code> keyword.
Lets first flag all the data below a level of <cite>0.5</cite>:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">saqc</span><span class="o">.</span><span class="n">SaQC</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">flagRange</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span> 
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/GlobalKeywords-9.png" class="plot-directive" src="../_images/GlobalKeywords-9.png" />
</figure>
<p>Now we can override the flags for the constant value course with the lowest (unflagged) flag level, which, for the
<a class="reference internal" href="../_api/saqc.core.FloatScheme.html#saqc.core.FloatScheme" title="saqc.core.FloatScheme"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatScheme</span></code></a> is the value <code class="docutils literal notranslate"><span class="pre">-np.inf</span></code>. Alternatively to the explicit value, we can use the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">UNFLAGGED</span></code> constant.
Also, for the override to work, we have to rise (or deactivate) the input filter, so that the <a class="reference internal" href="../_api/saqc.SaQC.html#saqc.SaQC.flagConstants" title="saqc.SaQC.flagConstants"><code class="xref py py-meth docutils literal notranslate"><span class="pre">saqc.SaQC.flagConstants()</span></code></a> method
gets the already flagged values passed to test them.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">saqc.constants</span> <span class="kn">import</span> <span class="n">UNFLAGGED</span><span class="p">,</span> <span class="n">FILTER_NONE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">flagConstants</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="s1">&#39;2D&#39;</span><span class="p">,</span> <span class="n">thresh</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">dfilter</span><span class="o">=</span><span class="n">FILTER_NONE</span><span class="p">,</span> <span class="n">flag</span><span class="o">=</span><span class="n">UNFLAGGED</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qc</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span> 
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/GlobalKeywords-10.png" class="plot-directive" src="../_images/GlobalKeywords-10.png" />
</figure>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/SaQCLogo.png" alt="Logo"/>
            </a></p>
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li class="toctree-l1"><a class="reference external" href="https://git.ufz.de/rdm-software/saqc">Repository</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted/InstallationGuide.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted/TutorialAPI.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted/TutorialCLI.html">Command Line Application</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Cookbooks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cookbooks/DataRegularisation.html">Data Regularisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cookbooks/OutlierDetection.html">Outlier Detection and Flagging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cookbooks/MultivariateFlagging.html">Multivariate Flagging</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ConfigurationFiles.html">Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="GenericFunctions.html">Generic Functions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Global Keywords</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#set-up">Set Up</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#flagging-scheme-constraint">Flagging Scheme Constraint</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-data">Example Data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#label-keyword">Label Keyword</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#label-example-usage">Label Example Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dfilter-and-flag-keywords">dfilter and flag keywords</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#flags-of-different-significance">Flags of Different Significance</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unflagging-values">Unflagging Values</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Customizations.html">Customizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="SourceTarget.html">Assigning results to new variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="FlaggingTranslation.html">Flags, History and Translations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SaQC</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/SaQC.html">Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/SaQCCore.html">Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/SaQCFunctions.html">Test Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/SaQCTranslation.html">Translations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/SaQCConstants.html">Constants</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../howtodoc/HowToDoc.html">Documentation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="WritingFunctions.html">Writing Functions</a></li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="GenericFunctions.html"
                          title="previous chapter">Generic Functions</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="Customizations.html"
                          title="next chapter">Customizations</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/documentation/GlobalKeywords.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Customizations.html" title="Customizations"
             >next</a> |</li>
        <li class="right" >
          <a href="GenericFunctions.html" title="Generic Functions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">SaQC 2.0.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Global Keywords</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Bert Palm, David Schäfer, Peter Lünenschloß, Florian Gransee.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>
  </body>
</html>