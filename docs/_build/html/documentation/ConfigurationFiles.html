
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Configuration Files &#8212; SaQC 2.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/nature.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
    <link rel="shortcut icon" href="../_static/SaQCLogoSmall.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Generic Functions" href="GenericFunctions.html" />
    <link rel="prev" title="Multivariate Flagging" href="../cookbooks/MultivariateFlagging.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="GenericFunctions.html" title="Generic Functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../cookbooks/MultivariateFlagging.html" title="Multivariate Flagging"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">SaQC 2.0.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Configuration Files</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p><a class="reference external" href="https://www.ufz.de/"><img alt="ufzLogo" src="../_images/UFZLogo.png" style="width: 40%;" /></a> <a class="reference external" href="https://www.ufz.de/index.php?de=45348"><img alt="rdmLogo" class="align-right" src="../_images/RDMLogo.png" style="width: 22%;" /></a></p>
<section id="configuration-files">
<h1>Configuration Files<a class="headerlink" href="#configuration-files" title="Permalink to this headline">¶</a></h1>
<p>In addition to it’s <a class="reference internal" href="../gettingstarted/TutorialAPI.html"><span class="doc">Python API</span></a>, SaQC also offers a text based
configuration system. This option has proven as a valuable strategy in largely automated
quality control workflows. The ability to change existing setups without changes
to the source code of, e.g. Extract-Transform-Load (ETL) pipelines, simplies the operation and adaption
of such workflows as well as the collaboration with less technical project partners.</p>
<section id="format">
<h2>Format<a class="headerlink" href="#format" title="Permalink to this headline">¶</a></h2>
<p>Configuration files are expected to be semicolon-separated text files with exactly one header
line. Each row of the configuration file lists one variable and a respective test function that
is applied to the given variable.</p>
<section id="header-names">
<h3>Header names<a class="headerlink" href="#header-names" title="Permalink to this headline">¶</a></h3>
<p>The first line of every configuration file is dropped, so feel free to use header
names to your liking.</p>
</section>
<section id="test-function-notation">
<h3>Test function notation<a class="headerlink" href="#test-function-notation" title="Permalink to this headline">¶</a></h3>
<p>The notation of test functions follows the function call notation of Python and
many other programming languages and looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flagRange</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<p>Here the function <a class="reference internal" href="../_api/saqc.SaQC.html#saqc.SaQC.flagRange" title="saqc.SaQC.flagRange"><code class="xref py py-meth docutils literal notranslate"><span class="pre">flagRange</span></code></a> is called and the
values <code class="docutils literal notranslate"><span class="pre">0</span></code> and <code class="docutils literal notranslate"><span class="pre">100</span></code> are passed to the parameters <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> respectively.
As we value readablity of the configuration more than conciseness of the extension language, only
keyword arguments are supported. That means that the notation <code class="docutils literal notranslate"><span class="pre">flagRange(0,</span> <span class="pre">100)</span></code>
is not a valid replacement for the above example.</p>
</section>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Every row lists one test per variable. If you want to call multiple tests on
a specific variable (and you probably want to), list them in separate rows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">varname</span> <span class="p">;</span> <span class="n">test</span>
<span class="c1">#-------;----------------------------------</span>
<span class="n">x</span>       <span class="p">;</span> <span class="n">flagMissing</span><span class="p">()</span>
<span class="n">x</span>       <span class="p">;</span> <span class="n">flagRange</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">x</span>       <span class="p">;</span> <span class="n">flagConstants</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="s2">&quot;3h&quot;</span><span class="p">)</span>
<span class="n">y</span>       <span class="p">;</span> <span class="n">flagRange</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mi">10</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
</pre></div>
</div>
<section id="available-test-functions">
<h3>Available Test Functions<a class="headerlink" href="#available-test-functions" title="Permalink to this headline">¶</a></h3>
<p>All <a class="reference internal" href="../modules/SaQCFunctions.html#test-functions"><span class="std std-ref">test functions</span></a> available in the
<a class="reference internal" href="../gettingstarted/TutorialAPI.html"><span class="doc">Python API</span></a> are also available in the configuration
system. The translation between API calls and the configuration syntax is straight forward
and best described by an example. Let’s consider the definition
of <a class="reference internal" href="../_api/saqc.SaQC.html#saqc.SaQC.flagRange" title="saqc.SaQC.flagRange"><code class="xref py py-meth docutils literal notranslate"><span class="pre">flagRange</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">flagRange</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="nb">min</span><span class="o">=-</span><span class="n">inf</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="n">inf</span><span class="p">,</span> <span class="n">flag</span><span class="o">=</span><span class="mf">255.</span><span class="p">)</span>
</pre></div>
</div>
<p>The signature consists of the prevalent parameter <code class="docutils literal notranslate"><span class="pre">field</span></code>, the specific parameters <code class="docutils literal notranslate"><span class="pre">min</span></code>
and <code class="docutils literal notranslate"><span class="pre">max</span></code> as well as the <a class="reference internal" href="GlobalKeywords.html#dfilter-and-flag-keywords"><span class="std std-ref">global parameter</span></a>
<code class="docutils literal notranslate"><span class="pre">flag</span></code>. The translation of the given API call to <code class="docutils literal notranslate"><span class="pre">flagRange</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">qc</span><span class="o">.</span><span class="n">flagRange</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">flag</span><span class="o">=</span><span class="n">BAD</span><span class="p">)</span>
</pre></div>
</div>
<p>into the configuration syntax look as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">varname</span> <span class="p">;</span> <span class="n">test</span>
<span class="c1">#-------;------------------------------------</span>
<span class="n">x</span>       <span class="p">;</span> <span class="n">flagRange</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">flag</span><span class="o">=</span><span class="n">BAD</span><span class="p">)</span>
</pre></div>
</div>
<p>We made the following changes: The value for <code class="docutils literal notranslate"><span class="pre">field</span></code> is given in the first column of the
configuration file, the actual function including all parameter as name-value pairs are given
in the second column.</p>
<p>All other test functions can be used in the same manner.</p>
</section>
<section id="regular-expressions-in-varname-column">
<h3>Regular Expressions in <code class="docutils literal notranslate"><span class="pre">varname</span></code> column<a class="headerlink" href="#regular-expressions-in-varname-column" title="Permalink to this headline">¶</a></h3>
<p>Some of the tests (e.g. checks for missing values, range tests or interpolation
functions) are very likely to be used on all or at least several variables of
a given dataset. As it becomes quite cumbersome to list all these
variables seperately, only to call the same functions with the same
parameters, SaQC supports regular expressions on variables. To mark a given
variable name as a regular expression, it needs to be quoted with <code class="docutils literal notranslate"><span class="pre">'</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">varname</span>    <span class="p">;</span> <span class="n">test</span>
<span class="c1">#----------;------------------------------</span>
<span class="s1">&#39;.*&#39;</span>       <span class="p">;</span> <span class="n">shift</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="s2">&quot;15Min&quot;</span><span class="p">)</span>
<span class="s1">&#39;(x | y)&#39;</span>  <span class="p">;</span> <span class="n">flagMissing</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/SaQCLogo.png" alt="Logo"/>
            </a></p>
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li class="toctree-l1"><a class="reference external" href="https://git.ufz.de/rdm-software/saqc">Repository</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted/InstallationGuide.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted/TutorialAPI.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted/TutorialCLI.html">Command Line Application</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Cookbooks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cookbooks/DataRegularisation.html">Data Regularisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cookbooks/OutlierDetection.html">Outlier Detection and Flagging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cookbooks/MultivariateFlagging.html">Multivariate Flagging</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configuration Files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#format">Format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#header-names">Header names</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-function-notation">Test function notation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#available-test-functions">Available Test Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#regular-expressions-in-varname-column">Regular Expressions in <code class="docutils literal notranslate"><span class="pre">varname</span></code> column</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="GenericFunctions.html">Generic Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="GlobalKeywords.html">Global Keywords</a></li>
<li class="toctree-l1"><a class="reference internal" href="Customizations.html">Customizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="SourceTarget.html">Assigning results to new variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="FlaggingTranslation.html">Flags, History and Translations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SaQC</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/SaQC.html">Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/SaQCCore.html">Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/SaQCFunctions.html">Test Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/SaQCTranslation.html">Translations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/SaQCConstants.html">Constants</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../howtodoc/HowToDoc.html">Documentation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="WritingFunctions.html">Writing Functions</a></li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="../cookbooks/MultivariateFlagging.html"
                          title="previous chapter">Multivariate Flagging</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="GenericFunctions.html"
                          title="next chapter">Generic Functions</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/documentation/ConfigurationFiles.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="GenericFunctions.html" title="Generic Functions"
             >next</a> |</li>
        <li class="right" >
          <a href="../cookbooks/MultivariateFlagging.html" title="Multivariate Flagging"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">SaQC 2.0.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Configuration Files</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Bert Palm, David Schäfer, Peter Lünenschloß, Florian Gransee.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>
  </body>
</html>